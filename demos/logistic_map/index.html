---
title: Logistic map
layout: header
---
<style>
  label {display: inline-block; width: 120px;}
  input {width: 700px;}
</style>


<div id="viz"></div>

<form>
  <p>
    <label for="r">Reproduction Rate</label>
    <input type="range" name="r" id="r" min="0" max="4.0" step="0.01" value="3.9" onchange="update()" />
    <span id="r_val"></span>
  </p>

  <p>
    <label for="i">Initial Population</label>
    <input type="range" name="i" id="i" min="0" max="1" step="0.01" value="0.2" onchange="update()" />
    <span id="i_val"></span>
  </p>

  <p>
    <label for="g">Generations</label>
    <input type="range" name="g" id="g" min="10" max="500" step="10" value="100" onchange="update()" />
    <span id="g_val"></span>
  </p>

</form>

<script type="text/javascript" src="/js/d3.v2.min.js"></script>

<script type="text/javascript">

    var data,
      w = 900,
      h = 450,
      margin = 20,
      x, y,
      line;

    var vis = d3.select("#viz")
        .append("svg:svg")
        .attr("width", w)
        .attr("height", h)

    var grp = vis.append("svg:g")
        .attr("transform", "translate(0, "+h+")");

    line = d3.svg.line();


    // grp.append("svg:line")
    //     .attr("x1", x(0))
    //     .attr("y1", -1 * y(0))
    //     .attr("x2", x(w))
    //     .attr("y2", -1 * y(0))
    //     .attr("stroke", "#000");

    // grp.append("svg:line")
    //     .attr("x1", x(0))
    //     .attr("y1", -1 * y(0))
    //     .attr("x2", x(0))
    //     .attr("y2", -1 * y(d3.max(data)))
    //     .attr("stroke", "#000");

    // grp.selectAll(".xTicks")
    //     .data(x.ticks(5))
    //     .enter().append("svg:line")
    //     .attr("class", "xTicks")
    //     .attr("x1", function(d) { return x(d); })
    //     .attr("y1", -1 * y(0))
    //     .attr("x2", function(d) { return x(d); })
    //     .attr("y2", -1 * y(-0.3))
    //     .attr("stroke", "#000");

    // grp.selectAll(".yTicks")
    //     .data(y.ticks(4))
    //     .enter().append("svg:line")
    //     .attr("class", "yTicks")
    //     .attr("y1", function(d) { return -1 * y(d); })
    //     .attr("x1", x(-0.3))
    //     .attr("y2", function(d) { return -1 * y(d); })
    //     .attr("x2", x(0))
    //     .attr("stroke", "#000");

    var path = grp.append("svg:path")
      .attr("fill", "#FFF")
      .attr("stroke", "#00f");

    function update(){
      var rate = document.getElementById('r').value,
          init = document.getElementById('i').value,
          gens = document.getElementById('g').value;

      document.getElementById('r_val').innerHTML = rate;
      document.getElementById('i_val').innerHTML = init;
      document.getElementById('g_val').innerHTML = gens;

      data = [init]

      for (j=1; j<gens; j++){
        var n = data[j-1];
        data[j] = rate * n * (1 - n);
      }

      y = d3.scale.linear().domain([0, d3.max(data)]).range([0 + margin, h - margin]);
      x = d3.scale.linear().domain([0, data.length]).range([0 + margin, w - margin]);

      line.x(function(d,i) { return x(i); });
      line.y(function(d)   { return -1 * y(d); });

      path.attr("d", line(data));

    }

    update();

</script>