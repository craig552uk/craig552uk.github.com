<!doctype html>
<html lang="{{ metadata.language }}">
	<head>
		<!-- Google tag (gtag.js) -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-KD7MWD7BBF"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag('js', new Date());
			gtag('config', 'G-KD7MWD7BBF');
			gtag('consent', 'default', {
				'ad_storage': 'denied',
				'ad_user_data': 'denied',
				'ad_personalization': 'denied',
				'analytics_storage': 'denied'
			});
		</script>

		<!-- MailerLite Universal -->
		<script>
			(function (w, d, e, u, f, l, n) {
				w[f] = w[f] || function () {
					(w[f].q = w[f].q || []).push(arguments);
				},
				l = d.createElement(e),
				l.async = 1,
				l.src = u,
				n = d.getElementsByTagName(e)[0],
				n
					.parentNode
					.insertBefore(l, n);
			})(window, document, 'script', 'https://assets.mailerlite.com/js/universal.js', 'ml');
			ml('account', '1154565');
		</script>

		<!-- Metadata -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>{{ title or metadata.title }}</title>
		<meta name="description" content="{{ description or metadata.description }}">
		<link rel="alternate" href="feed/feed.xml" type="application/atom+xml" title="{{ metadata.title }}">
		<link rel="stylesheet" href="/style.css?v={% version %}"/>

		<!-- Social Media Meta -->
		<meta property="og:title" content="{{ title or metadata.title }}"/>
		<meta property="og:type" content="article"/>
		<meta property="og:description" content="{{ description or metadata.description }}"/>
		<meta property="og:image" content="https://craig-russell.co.uk{{ image or '/img/og-image-default.png' }}"/>
		<meta property="og:url" content="https://craig-russell.co.uk{{ page.url }}"/>
		<meta name="twitter:card" content="summary_large_image">
		<meta property="og:site_name" content="Craig Russell">
	</head>
	<body>
		<a href="#skip" class="invisible">Skip to main content</a>

		<div class="container mx-auto max-w-3xl px-8">

			<header class="flex justify-between pb-12">
				<div>
					<div class="text-3xl font-bold">
						<a href="/" class="hover:underline">{{ metadata.title }}</a>
					</div>
					<div class="text-xl">{{ metadata.subtitle }}</div>
				</div>
				<ul class="flex flex-col md:flex-row *:ml-4 *:mb-2 text-lg">
					<li>
						<a href="/" class="hover:underline">Home</a>
					</li>
					<li>
						<a href="/blog" class="hover:underline">Blog</a>
					</li>
				</ul>
			</header>

			<main id="skip" class="space-y-12">
				{% block content %}
					{{ content | safe }}
				{% endblock %}
			</main>

			<footer class="text-center text-gray-400 text-sm py-8">
				<div class="flex justify-center gap-4 mt-8 md:mt-4">
					<a class="social-icon w-10 h-10" href="https://www.threads.net/@cmrussell.writes/" target="_blank">
						<img src="/img/icon-threads.png" alt="Threads"/>
					</a>
					{# <a class="social-icon w-10 h-10" href="https://www.instagram.com/cmrussell.writes/" target="_blank">
						<img src="/img/icon-instagram.png" alt="Instagram"/>
					</a> #}
					<a class="social-icon w-10 h-10" href="https://bsky.app/profile/cmrussell.bsky.social" target="_blank">
						<img src="/img/icon-bluesky.png" alt="BlueSky"/>
					</a>
					<a class="social-icon w-10 h-10" href="https://www.linkedin.com/in/craigrussell1983/" target="_blank">
						<img src="/img/icon-linkedin.png" alt="LinkedIn"/>
					</a>
				</div>

				<div class="mt-8">
					&copy; 2024 CM Russell Limited - <a href="/website-terms-of-use">Terms</a>
				</div>
			</footer>
		</div>

		<div id="cookie-consent" class="sticky bottom-4 max-w-3xl mx-auto px-8">
			<div class="py-2 px-4 bg-amber-100 rounded shadow-md" role="alert">
				<div class="text-sm flex justify-between">
					<span class="py-2">
						This site uses cookies to enhance user experience. 
						See <a href="/cookie-policy" class="underline">Cookie policy</a>
					</span>
					<span>
						<button 
							class="border rounded p-2 bg-sky-500 hover:bg-sky-400 text-white shadow-sm pointer" 
							onClick="acceptCookies()">
							Allow cookies
						</button>
					</span>
				</div>
			</div>
		</div>

		<script>
			const cookieConsent = document.querySelector('#cookie-consent');
			// Remove cookie consent banner if cookie present
			if (document.cookie.indexOf('cookie_consent=true') > -1 && cookieConsent) {
				cookieConsent.remove();
			}

			// Set cookie on button click
			function acceptCookies() {
				document.cookie = 'cookie_consent=true; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/';
				gtag('consent', 'update', {
					'ad_storage': 'granted',
					'ad_user_data': 'granted',
					'ad_personalization': 'granted',
					'analytics_storage': 'granted'
				});
				cookieConsent.remove();
			}
		</script>
	</body>
</html>